<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="full-screen" content="yes"/>
	<script type="text/javascript" src="js/mobile-util.js"></script>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/common.css">
	<link rel="stylesheet" href = "css/experiment.css" />

	<style type="text/css">
		/* page */
		* {margin: 0; padding: 0;}
		html {font-size: 16px;
			-webkit-text-size-adjust: 100%;
			-ms-text-size-adjust: 100%;}
		html * {outline: 0;
			-webkit-text-size-adjust: none;}
		html, body {height: 100%; width: 100%; font-family: 微软雅黑, sans-serif;}
		.container, .row {padding: 0;}
		.row {margin: 0;}

		.body {position: relative; height: 100%; overflow: hidden;}
		.wrap {position: relative; height: 100%;}
		.main {position: relative; width:100%; min-height: 100%; height: 100%; overflow: hidden;}


		@media (min-width: 720px) {
			.main {width: 720px; min-width: 720px;}
		}


		.left-region, .right-region {position: absolute; top: 0.5rem; width: 5.5rem; height: 2.5rem; z-index: 1000;}
		.left-region {left: 1.5rem;}
		.right-region {right: 1.5rem;}
		.col-xs-12 {padding: 0;}
		.list-wrap {position: absolute; left: 0; top: 0; bottom: 0; width: 100%; overflow: hidden; z-index: 300;}
		.list-wrap > div {position: absolute; left: 0; top: 0; width: 100%; overflow: hidden; margin-top: -0.5rem; min-height: 100%;}
		.search-item-layer {margin-top: 3rem; min-height: 100%;}
		/*.list-wrap {position: absolute; left: 0; top: 2rem; bottom: 0; width: 100%; overflow: hidden;}
		.list-wrap .scroll-layer {position: absolute; left: 0; top: 0;width: 100%; }*/
		.item-black {width: 17.35556rem; height: 7.13333rem; margin-bottom: -0.5rem; }
		.item-blue {width: 17.35556rem; height: 7.13333rem; margin-bottom: -0.5rem; }
		.item-red {width: 17.35556rem; height: 7.13333rem; margin-bottom: -0.5rem; }
		.search-item {position: relative; cursor: pointer; height: 7.13333rem; z-index: 300;}
		.search-item .item-info {position: relative; top: -6.63333rem; width: 17.35556rem; height: 7.13333rem; margin-bottom: -7.13333rem; -webkit-text-size-adjust:none; }
		.search-item .item-info .title {position: absolute; left: 1.76667rem; top: 2rem; font-size: 0.5444rem; font-weight: bold;}
		.search-item .item-info .type {position: absolute; top: 2rem; right: 6.83333rem; font-size: 0.4444rem; font-weight: bold; color: #FFFFFF; padding: 0.06667rem 0.26667rem;}
		.search-item .item-info .type-experiment {background-color: #10a3f3}
		.search-item .item-info .type-invention {background-color: #ffa802}
		.search-item .item-info .type-news {background-color: #f08ec9}
		.search-item .abstract {position: absolute; width: 9rem; left: 1.76667rem; top: 2.95444rem; font-size: 0.5444rem; color: #7d7d7d; letter-spacing: 2px;}
		.search-item .vote-num-layer {position: absolute; width: 9rem; left: 1.76667rem; top: 4.65444rem; font-size: 0.4444rem; font-weight: bold;}
		.search-item .vote-num-layer font {font-size: 0.54444rem;}
		.item-pic-layer {position: absolute; top: 1.4rem; right: 2.61111rem; width: 3.82222rem; height: 4.48889rem; background: url("img/bg-pic.png"); background-size: 3.82222rem 4.48889rem; background-repeat: no-repeat; 
		}
		.item-pic-layer .tape {position: absolute; left: 1.02222rem; top: -0.11111rem; width: 1.77778rem; height: 0.42222rem;}
		.item-pic-layer .item-pic {position: absolute; left: 0.17778rem; top: 0.15556rem; width: 3.46667rem; height: 3.46667rem;}
		.scroll-layer div:nth-child(even) .item-pic-layer{
			transform: rotate(-3.1deg) translateZ(0);
			-ms-transform: rotate(-3.1deg) translateZ(0);		/* IE 9 */
			-webkit-transform: rotate(-3.1deg) translateZ(0);	/* Safari and Chrome */
			-o-transform: rotate(-3.1deg) translateZ(0);		/* Opera */
			-moz-transform: rotate(-3.1deg) translateZ(0);		/* Firefox */
		}
		.scroll-layer div:nth-child(odd) .item-pic-layer{
			transform: rotate(4.3deg) translateZ(0);
			-ms-transform: rotate(4.3deg) translateZ(0);		/* IE 9 */
			-webkit-transform: rotate(4.3deg) translateZ(0);	/* Safari and Chrome */
			-o-transform: rotate(4.3deg) translateZ(0);		/* Opera */
			-moz-transform: rotate(4.3deg) translateZ(0);		/* Firefox */
		}
	</style>
</head>
<body>
<div class="body">
	<div class="wrap">
		<div class="container main" style="padding-top: 5px">
			<header>
				<div class="return">
				</div>
				<h1>小实验</h1>
				<div class="search"></div>
			</header>
			<div class="body main">
				<div class="col-xs-12 list-wrap">
					<div class="scroll-layer">
				<img src="img/experiment/spacemen.png" class="spacemen">
				<img src="img/experiment/ship1.png" class="ship1">
				<img src="img/experiment/ship2.png" class="ship2">
				<img src="img/experiment/star1.png" class="star1">
				<img src="img/experiment/star2.png" class="star2">

				<!--哪个被点击出发,让另一个没有被出发的div的z-index = -1 -->
				<div class="newest">
					<img class="head" src="img/experiment/newest.png">
					<div class="content">
						<div class="bg"></div>
					</div>
				</div>
				<div class="recommend">
					<img class="head" src="img/experiment/recomend.png">
					<div class="content">
						<div class="bg"></div>
					</div>
				</div>
				<div class="left-region"></div>
				<div class="right-region"></div>
						<div class="search-item-layer">
							<div class="search-item" data-id="1">
								<img class="bg-item item-black center-block" src="img/bg-item-black.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验</label>
									<label class="type type-experiment">小实验</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
							<div class="search-item" data-id="2">
								<img class="bg-item item-blue center-block" src="img/bg-item-blue.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验2</label>
									<label class="type type-news">小趣闻</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
							<div class="search-item" data-id="3">
								<img class="bg-item item-red center-block" src="img/bg-item-red.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验3</label>
									<label class="type type-invention">小发明</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
							<div class="search-item" data-id="4">
								<img class="bg-item item-black center-block" src="img/bg-item-black.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验4</label>
									<label class="type type-experiment">小实验</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
							<div class="search-item" data-id="4">
								<img class="bg-item item-black center-block" src="img/bg-item-black.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验4</label>
									<label class="type type-experiment">小实验</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
							<div class="search-item" data-id="4">
								<img class="bg-item item-black center-block" src="img/bg-item-black.png"/>
								<div class="item-info center-block">
									<label class="title">阿基米德小实验4</label>
									<label class="type type-experiment">小实验</label>
									<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>
									<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>

									<div class="item-pic-layer">
										<img class="item-pic" src="img/example.png"/>
										<img class="tape" src="img/tape.png"/>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/iscroll.js"></script>
<script type="text/javascript">

	var currentTab = "hot",	//tab: hot, newest
		type="all",			//type: all, experiment, invention, news
		testId = 0;

	$(document).ready(function() {

		setMinHeightChangeListener(700);

		var listScroller = new IScroll(".list-wrap", {
			mouseWheel: true
		});

		listScroller.on("scrollEnd", function() {
			var endY = $(".list-wrap").height() - $(".scroll-layer").height();
			if(this.y <= endY) {
				console.log("加载更多");

				//数据加载通过ajax处理，以下只是demo
				var html = getTestData(testId++);
				// $(".search-item-layer").append(html + html + html + html + html);
				listScroller.refresh();
			}
		});

		mobileClick(".left-region", function() {
			console.log("left click");

			if(currentTab !== "hot") {
				currentTab = "hot";
				$(".recommend .head").attr("src", "img/experiment/recomend.png");
				$(".newest .head").attr("src", "img/experiment/newest.png");
				$(".recommend").css("z-index", "100");
				$(".newest").css("z-index", "90");

				//加载热门推荐的数据
				$(".search-item-layer").html(getTestData(testId++));
				listScroller.refresh();
			}
		});

		mobileClick(".right-region", function() {
			console.log("right click");

			if(currentTab !== "newest") {
				currentTab = "newest";
				$(".recommend .head").attr("src", "img/experiment/recomendback.png");
				$(".newest .head").attr("src", "img/experiment/newfore.png");
				$(".recommend").css("z-index", "90");
				$(".newest").css("z-index", "100");

				//加载最新的数据
				$(".search-item-layer").html(getTestData(testId++));
				listScroller.refresh();
			}
		});



		// fullScreen();
	});

	function getTestData(id) {
		return '<div class="search-item" data-id="4">' +
							'<img class="bg-item item-black center-block" src="img/bg-item-black.png"/>' +
							'<div class="item-info center-block">' +
								'<label class="title">阿基米德小实验' + id + '</label>' +
								'<label class="type type-experiment">小实验</label>' +
								'<label class="abstract">流体静力学的一个重要原理，它指出，浸入静止流体中的物体...</label>' +
								'<label class="vote-num-layer"><font color="#f33b23">100</font> 人投票</label>' +
								'<div class="item-pic-layer">' +
									'<img class="item-pic" src="img/example.png"/>' +
									'<img class="tape" src="img/tape.png"/>' +
								'</div>' +
							'</div>' +
						'</div>';
	}

</script>
</html>