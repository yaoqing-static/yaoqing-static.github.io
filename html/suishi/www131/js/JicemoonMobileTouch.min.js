function JicemoonMobileTouch(d,n){var k=false;var b={tap:null,swipe:null,touchStart:null,touchMove:null,touchEnd:null};for(var l in n){b[l]=n[l];if(n[l]){k=true}}n=b;if(k){i()}var h=this;var a;this.swipeTime=200;this.tap=function(p){if(!a){i()}n.tap=p};this.touchStart=function(p){if(!a){i()}n.touchStart=p};this.touchMove=function(p){if(!a){i()}n.touchMove=p};this.touchEnd=function(p){if(!a){i()}n.touchEnd=p};this.swipe=function(p){if(!a){i()}n.swipe=p};this.allEvents=function(p){if(!a){i()}n.tap=p;n.touchStart=p;n.touchMove=p;n.touchEnd=p;n.swipe=p};this.removeEvents=function(s){var q=s.split(" ");for(var r=0;r<q.length;r++){var p=q[r].replace(" ");switch(p){case"tap":n.tap=null;break;case"touchStart":n.touchStart=null;break;case"touchMove":n.touchMove=null;break;case"touchEnd":n.touchEnd=null;break;case"swipe":n.swipe=null;break}}if(a&&!n.tap&&!n.touchStart&&!n.touchMove.touchEnd&&!n.swipe){g()}};this.removeAllEvents=function(){n.tap=null;n.touchStart=null;n.touchMove=null;n.touchEnd=null;n.swipe=null;if(a){g()}};var o={};o.mouseDown=false;function j(){if(o.evt){if(o.evt.stopPropagation){o.evt.stopPropagation()}else{o.evt.cancelBubble=true}}}function f(){if(o.evt){if(o.evt.preventDefault){o.evt.preventDefault()}else{o.evt.returnValue=false}}}o.startTime=0;function e(p){p=p||window.event;o.evt=p;var q={};q.stopPropagation=j;q.preventDefault=f;q.touch=h;q.target=d;switch(p.type){case"touchstart":q.type="touchStart";o.startTime=(new Date()).getTime();q.pageX=p.targetTouches[0].pageX;q.pageY=p.targetTouches[0].pageY;q.screenX=p.targetTouches[0].screenX;q.screenY=p.targetTouches[0].screenY;o.startScreenX=q.screenX;o.startScreenY=q.screenY;o.startPageX=q.pageX;o.startPageY=q.pageY;if(n.touchStart){n.touchStart(q)}break;case"touchmove":q.type="touchMove";q.pageX=p.targetTouches[0].pageX;q.pageY=p.targetTouches[0].pageY;q.screenX=p.targetTouches[0].screenX;q.screenY=p.targetTouches[0].screenY;q.moveTotalScreenX=q.screenX-o.startScreenX;q.moveTotalScreenY=q.screenY-o.startScreenY;q.moveTotalPageX=q.pageX-o.startPageX;q.moveTotalPageY=q.pageY-o.startPageY;if(n.touchMove){n.touchMove(q)}break;case"touchend":q.type="touchEnd";q.pageX=p.changedTouches[0].pageX;q.pageY=p.changedTouches[0].pageY;q.screenX=p.changedTouches[0].screenX;q.screenY=p.changedTouches[0].screenY;o.moveTotalX=q.screenX-o.startScreenX;o.moveTotalY=q.screenY-o.startScreenY;o.move=!(Math.abs(o.moveTotalX)<=1&&Math.abs(o.moveTotalY)<=1);m(q);break;case"mousedown":q.type="touchStart";o.startTime=(new Date()).getTime();o.mouseDown=true;q.pageX=p.clientX;q.pageY=p.clientY;q.screenX=p.screenX;q.screenY=p.screenY;o.startScreenX=q.screenX;o.startScreenY=q.screenY;o.startPageX=q.pageX;o.startPageY=q.pageY;o.move=false;if(n.touchStart){n.touchStart(q)}break;case"mousemove":q.time=(new Date()).getTime()-o.startTime;if(o.mouseDown){q.type="touchMove";q.pageX=p.clientX;q.pageY=p.clientY;q.screenX=p.screenX;q.screenY=p.screenY;q.moveTotalScreenX=q.screenX-o.startScreenX;q.moveTotalScreenY=q.screenY-o.startScreenY;q.moveTotalPageX=q.pageX-o.startPageX;q.moveTotalPageY=q.pageY-o.startPageY;if(!o.move){o.move=true}if(n.touchMove){n.touchMove(q)}}break;case"mouseout":o.mouseDown=false;break;case"mouseup":q.type="touchEnd";o.mouseDown=false;q.pageX=p.clientX;q.pageY=p.clientY;q.screenX=p.screenX;q.screenY=p.screenY;o.moveTotalX=q.screenX-o.startScreenX;o.moveTotalY=q.screenY-o.startScreenY;m(q);break}}function m(q){q.time=(new Date()).getTime()-o.startTime;if(o.move){q.moveTotalScreenX=o.moveTotalX;q.moveTotalScreenY=o.moveTotalY;q.moveTotalPageX=q.pageX-o.startPageX;q.moveTotalPageY=q.pageY-o.startPageY;var p=Math.abs(o.moveTotalX/o.moveTotalY);if(p<1){if(o.moveTotalY<0){q.direction="up"}else{q.direction="down"}}else{if(o.moveTotalX<0){q.direction="left"}else{q.direction="right"}}if(q.time<h.swipeTime&&n.swipe){q.type="swipe";n.swipe(q)}else{if(n.touchEnd){n.touchEnd(q)}}}else{if(n.tap){q.type="tap";n.tap(q)}}}function i(){if(c()){d.addEventListener("touchstart",e);d.addEventListener("touchmove",e);d.addEventListener("touchend",e)}else{if(d.addEventListener){d.addEventListener("mousedown",e);d.addEventListener("mousemove",e);d.addEventListener("mouseup",e);d.addEventListener("mouseout",e)}else{if(d.attachEvent){d.attachEvent("onmousedown",e);d.attachEvent("onmousemove",e);d.attachEvent("onmouseup",e);d.attachEvent("onmouseout",e)}else{d.onmousedown=e;d.onmousemove=e;d.onmouseup=e;d.onmouseup=e}}}a=true}function g(){if(c()){d.removeEventListener("touchstart",e);d.removeEventListener("touchmove",e);d.removeEventListener("touchend",e)}else{if(d.removeEventListener){d.removeEventListener("mousedown",e);d.removeEventListener("mousemove",e);d.removeEventListener("mouseup",e);d.removeEventListener("mouseout",e)}else{if(d.detachEvent){d.detachEvent("onmousedown",e);d.detachEvent("onmousemove",e);d.detachEvent("onmouseup",e);d.detachEvent("onmouseout",e)}else{d.onmousedown=null;d.onmousemove=null;d.onmouseup=null;d.onmouseup=null}}}a=false}function c(){try{document.createEvent("TouchEvent");return true}catch(p){return false}}}if(window.jQuery){(function(a){a.prototype.addTouchEvent=function(f,g){var c=f.split(" ");var e={};for(var d=0;d<c.length;d++){var b=c[d].replace(" ");if(b.length>0){e[b]=g}}return this.each(function(){new JicemoonMobileTouch(a(this)[0],e)})};a.prototype.addTap=function(b){return this.each(function(){new JicemoonMobileTouch(a(this)[0],{tap:b})})};a.prototype.addTouchEvents=function(b){return this.each(function(){(new JicemoonMobileTouch(a(this)[0])).allEvents(b)})}})(jQuery)};