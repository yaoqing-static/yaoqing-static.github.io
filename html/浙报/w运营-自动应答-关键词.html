<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>新媒体云服务平台</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/ui-dialog.css">
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/kaquan.css"/>
    <link rel="stylesheet" href="css/zstyle.css"/>
</head>
<body>

<div class="commonBox">
    <div class="nav">
        <a href="#" class="head">
            <img src="images/navHead.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon6.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon7.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon8.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon9.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon10.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon11.png"/>
        </a>
        <a href="#">
            <img src="images/z-icon11.png"/>
        </a>
        <a href="#" class="last1">
            <img src="images/navBack.png"/>
        </a>
    </div>

    <div class="contentBox">
        <div class="title text-center">
            新媒体云服务平台-NewMedia
        </div>
        <h1>自定义菜单</h1>
         
        <div class="subNav">
            
            <a href="#">
                <img class="subNavOrgAdd" src="images/subNavOrgdd.png"/>
                <span>欢迎词设置</span>
            </a>
            <a href="#">
                <img class="subNavOrgAdd" src="images/subNavOrgdd.png"/>
                <span>无匹配设置</span>
            </a>
            <a href="#">
                <img class="subNavOrgAdd" src="images/subNavOrgdd.png"/>
                <span>图片消息设置</span>
            </a>
            <a href="#">
                <img class="subNavOrgAdd" src="images/subNavOrgdd.png"/>
                <span>音频消息设置</span>
            </a>
            <a href="#" class="actived">
                <img class="subNavOrgAdd" src="images/subNavOrgdd.png"/>
                <span>关键词设置</span>
            </a>
            
            


        </div>
        <div class="content w730">
        	<div class="diy">
            <div class="fll">
                <h3>关键词设置</h3>
            </div>
        </div>
        <div class="tianjg" id="newBtn">
        	<div class="fll">
        		<img src="images/jia.png" />
        	</div>
        	<div class="fabu fll mrl5">添加</div>
        </div>     
        
        
       <div class="panel-group" role="tablist">  
            <div class="fuize w730">
                <div class="guanj"  role="tab" id="collapseListGroupHeading0">
                    <div class="xiangm fll">项目1</div>
                    <div class="xial frr" role="button" data-toggle="collapse" href="#collapseListGroup0" aria-expanded="false"
                         aria-controls="collapseListGroup1">
                        <img src="images/xia.png" />
                    </div>
            
                </div>
                <div class="xiangn">
                    <div class="rong">
                        <ul>
                            <li class="fabu w380 fll">
                                关键词
                            </li>
                            <li class="fabu fll">
                                积分；我的积分；积分查询；活动积分
                            </li>
                        </ul>
                        <ul>
                            <li class="fabu w380 fll">
                                回复
                            </li>
                            <li class="fabu fll">
                                1条（1条文本，0条素材，0条动态获取。）
                            </li>
                        </ul>
                    </div>
                </div>
            
            
                <div id="collapseListGroup0" class="neir" role="tabpanel"
                     aria-labelledby="collapseListGroupHeading0" aria-expanded="false" style="height: 0px; overflow:hidden">
                    <div class="guize mrt15">
                        <div class="fll kay nameu">规则名称</div>
                        <div class="fll">	
                            <input id="text" type="text" class="form-control w540 fll" maxlength="6" />
                            <span class="fen">0/6</span>
                        </div>
                    </div>
                    <div class="guize mrt15">
                        <div class="fll kay nameu">有限期</div>
                        <div class=" mrl10 fll">
                            <div class="mrt10 fll">
                                <div class="quan fll" id="zhuan2">
                                    <div  id="tiao2" >
                                        <img src="images/dianjh.png"/>
                                    </div>
            
                                </div>
                                <div class="fll ">
                                    <div class=" gudx  ">
            
                                        无限期
                                    </div>
            
                                </div>
                            </div>
            
            
            
                        </div>
                        <div class=" mrl70 fll">
                            <div class="mrt10 fll">
                                <div class="quan fll" id="zhuan3">
                                    <div  id="tiao3" class="di">
                                        <img src="images/dianjh.png"/>
                                    </div>
            
                                </div>
                                <div class="fll">
                                    <div class=" gudx fll   ">
            
                                        有效期
            
                                    </div>
                                    <div class="fll m">
                                        <select class="form-control fll w140">
                                            <option>时间</option>
                                            <option>状态</option>
                                            <option selected="selected" >1321</option>
                                        </select>
                                        <span class="fenxx fll">至</span>
                                        <select class="form-control fll w140">
                                            <option>时间</option>
                                            <option>状态</option>
                                            <option selected="selected" >1321</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
            
            
            
                        </div>
            
            
                    </div>
            
                    <div class="guize mrt15">
                        <div class="fll kay nameu">优先级</div>
                        <div class="w540 bob fll">
                            <div class=" yxj y0 fll mrl10 yxjhui">0</div>
                            <div class=" yxj y1 fll mrl35">1</div>
                            <div class=" yxj y2 fll mrl35">2</div>
                            <div class=" yxj y3 fll mrl35">3</div>
                            <div class=" yxj y4 fll mrl35">4</div>
                            <div class=" yxj y5 fll mrl35">5</div>
                            <div class=" yxj y6 fll mrl35">6</div>
                            <div class=" yxj y7 fll mrl35">7</div>
                            <div class=" yxj y8 fll mrl35">8</div>
                            <div class=" yxj y9 fll mrl35">9</div>
                        </div>
            
            
                    </div>       	     
            
                    <div class="guize mrt15 ">
                        <div class="fll kay nameu">状态</div>
                        <div class="zhuangt fll" id="dui1">
                            <div class="fll wi20 di" id="fn1" style="display:block"><img src="images/dui.png"/></div>
                            <div class="fll wi20" id="fa1" style="display:none"><img src="images/kongf.png"/></div>
                            <div class="xiaozi fll">启用</div>
            
                        </div>
                        <div class="zhuangt fll mrl55" id="dui2">
                            <div class="fll wi20 di" id="fn2"><img src="images/dui.png"/></div>
                            <div class="fll wi20" id="fa2"><img src="images/kongf.png"/></div>
                            <div class="xiaozi fll">停用</div>
                        </div>
                    </div>
                    <div class="jingz mrt15">
                        <div class="fll kay nameu">精准关键词</div>
                        <div class="fll">
                            <textarea id="gjz1" class="dute" placeholder="关键词之间逗号分隔"></textarea>
                        </div>
                    </div>
                    <div class="jingz mrt15">
                        <div class="fll kay nameu">模糊关键词</div>
                        <div class="fll">
                            <textarea id="gjz2" class="dute" placeholder="关键词之间逗号分隔"></textarea>
                        </div>
                    </div>
                    <div class="guize mrt15">
                        <div class="fll kay nameu">内容设置</div>
                        <div class="bo_box mrt5">
                            <div class="fll mrlf10 aa" id="autoText">
                                <span class="radi radi1 zu_radi"></span>
                                <span class=" xiaozi">文本</span>
                            </div>
                            <div class="fll mrl40 aa" id="imgPic">
                              <a  id="tablist2-tab" href="#tablist2" aria-controls="tablist2" role="tab" data-toggle="tab" aria-expanded="false">  <span class="radi"></span>
                                <span class="xiaozi">图片</span></a>
                            </div>
                            <div class="fll mrl40 aa" id="Audio">
                                <span class="radi"></span>
                                <span class="xiaozi">语音</span>
                            </div>
                            <div class="fll mrl40 aa" id="Video">
                                <span class="radi"></span>
                                <span class="xiaozi">视频</span>
                            </div>
                            <div class="fll mrl40 aa" id="URL1">
                                <span class="radi radi1"></span>
                                <span class="xiaozi">跳转页面</span>
                            </div>
                            <div class="fll mrl40 aa" id="URL2">
                                <span class="radi radi1"></span>
                                <span class="xiaozi">动态获取</span>
                            </div>
                        </div>
                    </div>
                    <div class="guize mrt15 mrl130" id="Control">
                        <textarea class="dute"  id='conter'></textarea>
            			
                    </div>
                    
                    <div class="shangs frr">
                        <input type="button" class=" qued fll" id="SaveSet"  value="确定"/>
                        <input type="button" class="quxiao frr"  value="删除"/>
            
                    </div>
                    <div class="relativeNew">         
                        <div class="modal-content w335">
                            <div class="modal-header">
                                <div class="mai_box hei_box">
                                    <img src="images/z-icon13.png">
                                    确认删除？
                                </div>
                                <div class="mai_box_one hei_box">
                                    <p style="text-align: center">（删除后该菜单内的所有内容将失效）</p>
                                </div>
                                <div class="bt_box">
                                    <div id="myButtons1" class="bs-example" style="text-align: center">
                                        <button type="button" class="btn btn-primary bj_che ">确认</button>
                                        <button type="button" class="btn btn-primary bj_qx">取消</button>
                                    </div>
                                </div>
                                <div class="xiaj">
                                    <img src="images/jiankk.png" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
 	   </div> 
        </div>
</div>

<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="bower_components/underscore/underscore-min.js"></script>
<script src="js/lib/icheck.min.js"></script>
<script src="js/lib/bootstrap-select.min.js"></script>
<script src="js/border.js"></script>
<script src="js/holdingMe.js"></script>
<script src="js/daijin.js"></script>
<script src="js/dialog-min.js"></script>
<script>
    jQuery(function ($) {
        borderInit();
	var htmlobj=$.ajax({url:"dialog.html",type:"GET",dataType:"html",async:false}).responseText;
	var qjhtmlM='';
	//弹框
	function showModal($control,$syControl,$dqControl) {
		var htmlM="";
		var d = dialog({
			title: '选择素材',
			content: htmlobj,
				button: [
			{
				value: '确定',
				callback: function () {
					if(htmlM==''){alert('请选择素材');return false}
					$control.html(htmlM);
					$syControl.removeClass("zu_radi");
					$dqControl.toggleClass("zu_radi");
				},
				autofocus: true
			},
			{
				value: '取消'
			}
		]
		});
		
		d.showModal();
		$(".newimg .col-md-3").click(function(){
			$(".newimg .col-md-3").removeClass("active");
			$(this).addClass("active");
			htmlM=$(this).html();
			qjhtmlM=htmlM;
		 })	
	};
	
		
	  var bindEvent = function ($obj) {
		  $obj.on('hide.bs.collapse', function () {
			$(this).find('.xiangn').show(200);
		  }).on('show.bs.collapse', function () {
			$(this).find('.xiangn').hide(200);
		  }).find('.qued.fll').on('click', function () {
		  })
		  
		  
		  
	  $obj.find('#SaveSet').on('click', function () {
		  var error="";
		  var content=$(this).parents(".panel-group").find("#conter").val();
		  if($(this).parents(".panel-group").find("#text").val()==""){
			error+="规则名称不能为空；";
			}
		  if($(this).parents(".panel-group").find("#gjz1").val()==""){
			error+="精准关键词不能为空；";
			}
		  if($(this).parents(".panel-group").find("#gjz2").val()==""){
			error+="模糊关键词不能为空；";
			}
		  if(content==""){
			error+="内容设置不能为空；";
			}
		  if(content==undefined){var content=qjhtmlM; }
		  if(error==''){
			  alert('验证通过')
			  alert(content.trim())
			  }
		  else{alert(error)}
		  
		  
		  })	  
	  
	  //删除
	  $obj.find('.quxiao.frr').on('click',function(){
			  $('.relativeNew').hide();
			  $(this).parents('.shangs.frr').siblings('.relativeNew').show();
			  $('.bj_che').off().on('click',function() {
				$(this).parents('.panel-group').remove();
			  });
			  $('.bj_qx').off().on('click',function() {
				$(this).parents('.relativeNew').hide();
			  });
		  })
	
	  //内容设置
	  var wbHtml="<input id='conter' type='text' class='form-control w540 fll' placeholder='Url:'/>";
	  var wbHtml2='<textarea class="dute" id="conter"></textarea>';	  
	  $obj.find('.aa').on('click',function(){
				var $syControl=$(this).parents(".panel-group").find(".radi");
				var $dqControl=$(this).find(".radi");
				var $control = $(this).parents(".panel-group").find("#Control");
				if($(this).attr('id')=='URL1'||$(this).attr('id')=='URL2'){
					$syControl.removeClass("zu_radi");
					$dqControl.toggleClass("zu_radi");
					$control.html(wbHtml);
				}
				if($(this).attr('id')=='autoText'){
					$syControl.removeClass("zu_radi");
					$dqControl.toggleClass("zu_radi");
					$control.html(wbHtml2);
				}
				if($(this).attr('id')=='imgPic'){
					showModal($control,$syControl,$dqControl);
					$(".nav-tabs li").removeClass("active").eq(1).addClass("active");
					$("#tablist1").removeClass("active");
				}
				if($(this).attr('id')=='Audio'){
					showModal($control,$syControl,$dqControl);
				}
				if($(this).attr('id')=='Video'){
					showModal($control,$syControl,$dqControl);
				}
		  })	  
		  
	    $obj.find(".zhuangt.fll").click(function(){ 
			$(this).parents(".panel-group").find(".wi20").show();
			$(this).parents(".panel-group").find(".wi20.di").hide();
			$(this).find(".wi20").hide();
			$(this).find(".wi20.di").show();
        }); 
	  
	 $obj.find('input[type="text"]').on('keyup', function () {
        var len = this.value.length;
        if (len > 6) {
          $(this).next().text(len + '/6').css('color', '#ff7e3f');
        } else {
          $(this).next().text(len + '/6').css('color', '#999');
        }
      });
     
    };

    bindEvent($('.panel-group'));
		
		$('#newBtn').on('click', function () {
      var count = $('.panel-group').length + 1;
      var html = $('<div role="tablist" class="panel-group"><div class="fuize w730"><div id="collapseListGroupHeading0" role="tab" class="guanj"><div class="xiangm fll">项目1</div><div aria-controls="collapseListGroup1" aria-expanded="true" href="#collapseListGroup'+count+'" data-toggle="collapse" role="button" class="xial frr"><img src="images/xia.png"></div></div><div class="xiangn" style="display:none"><div class="rong"><ul><li class="fabu w380 fll">关键词</li><li class="fabu fll">积分；我的积分；积分查询；活动积分</li></ul><ul><li class="fabu w380 fll">回复</li><li class="fabu fll">1条（1条文本，0条素材，0条动态获取。）</li></ul></div></div><div style="overflow:hidden" aria-expanded="true" aria-labelledby="collapseListGroupHeading0" role="tabpanel" class="neir collapse in" id="collapseListGroup'+count+'"><div class="guize mrt15"><div class="fll kay nameu">规则名称</div><div class="fll"><input type="text" maxlength="6" class="form-control w540 fll" id="text"> <span class="fen">0/6</span></div></div><div class="guize mrt15"><div class="fll kay nameu">有限期</div><div class="mrl10 fll"><div class="mrt10 fll"><div id="zhuan2" class="quan fll"><div id="tiao2"><img src="images/dianjh.png"></div></div><div class="fll"><div class="gudx">无限期</div></div></div></div><div class="mrl70 fll"><div class="mrt10 fll"><div id="zhuan3" class="quan fll"><div class="di" id="tiao3"><img src="images/dianjh.png"></div></div><div class="fll"><div class="gudx fll">有效期</div><div class="fll m"><select class="form-control fll w140"><option>时间</option><option>状态</option><option selected>1321</option></select><span class="fenxx fll">至</span><select class="form-control fll w140"><option>时间</option><option>状态</option><option selected>1321</option></select></div></div></div></div></div><div class="guize mrt15"><div class="fll kay nameu">优先级</div><div class="w540 bob fll"><div class="yxj y0 fll mrl10 yxjhui">0</div><div class="yxj y1 fll mrl35">1</div><div class="yxj y2 fll mrl35">2</div><div class="yxj y3 fll mrl35">3</div><div class="yxj y4 fll mrl35">4</div><div class="yxj y5 fll mrl35">5</div><div class="yxj y6 fll mrl35">6</div><div class="yxj y7 fll mrl35">7</div><div class="yxj y8 fll mrl35">8</div><div class="yxj y9 fll mrl35">9</div></div></div><div class="guize mrt15"><div class="fll kay nameu">状态</div><div id="dui1" class="zhuangt fll"><div style="display:block" id="fn1" class="fll wi20 di"><img src="images/dui.png"></div><div style="display:none" id="fa1" class="fll wi20"><img src="images/kongf.png"></div><div class="xiaozi fll">启用</div></div><div id="dui2" class="zhuangt fll mrl55"><div id="fn2" class="fll wi20 di"><img src="images/dui.png"></div><div id="fa2" class="fll wi20"><img src="images/kongf.png"></div><div class="xiaozi fll">停用</div></div></div><div class="jingz mrt15"><div class="fll kay nameu">精准关键词</div><div class="fll"><textarea placeholder="关键词之间逗号分隔" class="dute" id="gjz1"></textarea></div></div><div class="jingz mrt15"><div class="fll kay nameu">模糊关键词</div><div class="fll"><textarea placeholder="关键词之间逗号分隔" class="dute" id="gjz2"></textarea></div></div><div class="guize mrt15"><div class="fll kay nameu">内容设置</div><div class="bo_box mrt5"><div id="autoText" class="fll mrlf10 aa"><span class="radi radi1 zu_radi"></span> <span class="xiaozi">文本</span></div><div id="imgPic" class="fll mrl40 aa"><a aria-expanded="false" data-toggle="tab" role="tab" aria-controls="tablist2" href="#tablist2" id="tablist2-tab"><span class="radi"></span> <span class="xiaozi">图片</span></a></div><div id="Audio" class="fll mrl40 aa"><span class="radi"></span> <span class="xiaozi">语音</span></div><div id="Video" class="fll mrl40 aa"><span class="radi"></span> <span class="xiaozi">视频</span></div><div id="URL1" class="fll mrl40 aa"><span class="radi radi1"></span> <span class="xiaozi">跳转页面</span></div><div id="URL2" class="fll mrl40 aa"><span class="radi radi1"></span> <span class="xiaozi">动态获取</span></div></div></div><div id="Control" class="guize mrt15 mrl130"><textarea id="conter" class="dute"></textarea></div><div class="shangs frr"><input type="button" value="确定" id="SaveSet" class="qued fll"> <input type="button" value="删除" class="quxiao frr"></div><div class="relativeNew"><div class="modal-content w335"><div class="modal-header"><div class="mai_box hei_box"><img src="images/z-icon13.png"> 确认删除？</div><div class="mai_box_one hei_box"><p style="text-align:center">（删除后该菜单内的所有内容将失效）</p></div><div class="bt_box"><div style="text-align:center" class="bs-example" id="myButtons1"><button class="btn btn-primary bj_che" type="button">确认</button> <button class="btn btn-primary bj_qx" type="button">取消</button></div></div><div class="xiaj"><img src="images/jiankk.png"></div></div></div></div></div></div></div>');
      $(this).after(html);
      bindEvent(html);
    });
		
    });
	
	
</script>
</body>
</html>